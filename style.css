/* =========================================
   1. 全域設定與容器置中 (Global Layout)
   ========================================= */
* {
    box-sizing: border-box; /* 確保 padding 不會撐大寬度 */
}

body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
    background-color: #333; /* 瀏覽器背景深色 */
    
    /* ★ 核心置中設定 ★ */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* 防止瀏覽器出現捲軸 */
}

/* 這是所有頁面的統一外框 (模擬手機) */
#main-content-area {
    width: 393px;
    height: 852px;
    position: relative;
    background: #fff;
    box-shadow: 0 0 50px rgba(0,0,0,0.5);
    /* 確保切換頁面時內容不會溢出 */
    overflow: hidden; 
}

/* =========================================
   2. 通用頁面基底 (Base Screen Styles)
   ========================================= */
/* 所有頁面共用的背景與排版 */
.screen, .first-page-screen, .login-screen, .register-screen, 
.setting-screen, .main-screen, .map-screen {
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, #FFFFFF 0%, #EAE5CE 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

/* --- 各頁面特殊調整 --- */

/* 首頁：內容靠下 */
.first-page-screen {
    justify-content: flex-end;
    padding-bottom: 150px;
}

/* 登入/註冊/修改：內容靠上，有左右留白 */
.login-screen, .register-screen, .setting-screen {
    padding: 20px 30px;
    /* 登入頁不需要垂直置中，而是由上而下排列 */
    justify-content: flex-start; 
}

/* 主畫面：模擬手機圓角視覺 (如果是全螢幕則可移除 border-radius) */
.main-screen {
    /* 根據原設計，主畫面背景有微調 */
    padding: 60px 25px 40px 25px;
}

/* 地圖：滿版背景 */
.map-screen {
    background-color: #f0f0f0;
}

/* =========================================
   3. 標題與導航 (Headers & Titles)
   ========================================= */
.header, .setting-header, .login-header, .register-header {
    width: 100%;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    margin-top: 20px;
    flex-shrink: 0;
    z-index: 10;
}

/* 登入註冊頁的 Header 調整 */
.login-header, .register-header {
    margin-top: 0; 
    margin-bottom: 20px;
    justify-content: flex-start; /* 箭頭靠左 */
}

.back-btn, .back-button-black {
    background: none;
    border: none;
    font-size: 28px;
    color: #000;
    cursor: pointer;
    padding: 10px;
    position: absolute;
    left: 0;
}

/* 頁面標題 */
.page-title {
    font-size: 24px;
    font-weight: bold;
    color: #000;
    letter-spacing: 2px;
}

/* 登入註冊的大標題 */
.login-title, .register-title {
    font-size: 32px;
    font-weight: bold;
    color: #BEA587;
    text-align: center;
    margin-bottom: 40px;
    letter-spacing: 4px;
}

/* =========================================
   4. 按鈕樣式還原 (Buttons)
   ========================================= */
/* 定義按鈕基礎 */
button { font-family: inherit; }

.menu-button-container {
    display: flex;
    flex-direction: column; /* 關鍵：讓按鈕上下排列 */
    gap: 30px;              /* 按鈕之間的間距 */
    align-items: center;    /* 水平置中 */
    width: 100%;
}
/* 4.1 首頁按鈕 (Firstpage) */
.menu-btn {
    width: 180px;
    height: 60px;
    background-color: #F4B04B;
    border-radius: 30px;
    color: #F2F3F5;
    font-size: 24px;
    font-weight: bold;
    border: none;
    letter-spacing: 6px;
    text-indent: 6px;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
    cursor: pointer;
}

/* 4.2 登入/註冊/確認按鈕 (Login/Register/Confirm) */
.main-login-btn, .main-register-btn, .confirm-btn {
    width: 160px;
    height: 55px;
    background-color: #F4B04B;
    border-radius: 27.5px;
    color: #F2F3F5;
    font-size: 24px;
    font-weight: bold;
    border: none;
    letter-spacing: 2px;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    display: block;
    margin: 40px auto 0 auto; /* 置中 */
}

/* 4.3 主畫面下方按鈕 (Main Action) */
.action-btn {
    width: 200px;
    height: 60px;
    background-color: #F4B04B;
    border-radius: 30px;
    color: #FFFFFF;
    font-size: 22px;
    font-weight: bold;
    border: none;
    letter-spacing: 2px;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
    cursor: pointer;
}

/* 4.4 設定頁選單按鈕 (Settings Menu) */
.menu-list .menu-btn {
    /* 覆寫 .menu-btn 的樣式 */
    width: 320px;
    height: 70px;
    border-radius: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 30px;
    margin-bottom: 0; /* 清除首頁的 margin */
    letter-spacing: normal;
    text-indent: 0;
}
.menu-list .menu-btn i { font-size: 24px; color: #fff; }
.menu-list .btn-text { font-size: 22px; font-weight: bold; letter-spacing: 4px; color: #fff; }

/* 4.5 登出按鈕 */
.logout-btn {
    width: 180px;
    height: 55px;
    background-color: #F4B04B;
    border-radius: 27.5px;
    border: none;
    color: #FFFFFF;
    font-size: 22px;
    font-weight: bold;
    letter-spacing: 4px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.15);
}

/* 按鈕點擊效果 */
.menu-btn:active, .main-login-btn:active, .action-btn:active, .logout-btn:active {
    transform: scale(0.95);
}

/* =========================================
   5. 表單輸入框 (Inputs)
   ========================================= */
.form-container, .login-form, .register-form {
    width: 100%;
    display: flex;
    flex-direction: column;
}

.input-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 25px;
}

.input-group label {
    font-size: 18px;
    font-weight: bold;
    color: #BEA587;
    display: flex;
    align-items: center;
    gap: 10px;
}

.styled-input {
    width: 100%;
    height: 60px;
    background-color: #BEA587;
    border: none;
    border-radius: 30px;
    padding: 0 50px 0 20px; /* 右側留給 icon */
    font-size: 18px;
    color: #FFFFFF;
    outline: none;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
}

.styled-input::placeholder {
    color: rgba(255, 255, 255, 0.7);
}

.password-wrapper, .input-wrapper {
    position: relative;
    width: 100%;
}

.toggle-password-icon, .input-icon, .toggle-password {
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: #FFFFFF;
    font-size: 20px;
    cursor: pointer;
    z-index: 2;
}

/* 忘記密碼與連結 */
.forgot-password { text-align: left; padding-left: 10px; margin-top: -10px; margin-bottom: 40px; }
.forgot-password a { color: #BEA587; text-decoration: underline; font-size: 14px; }
.register-link { text-align: center; color: #BEA587; font-size: 14px; font-weight: bold; margin-top: 20px; }
.register-link a { text-decoration: underline; margin-left: 5px; cursor: pointer; }

/* =========================================
   6. 主頁面 (Main) 側邊選單與配置
   ========================================= */
.top-bar {
    width: 100%; height: 50px;
    display: flex; justify-content: space-between; align-items: center;
    position: absolute; top: 20px; left: 0;
    padding: 0 25px; 
    z-index: 20; pointer-events: none; /* 讓點擊穿透 */
}

.menu-trigger {
    font-size: 28px; color: #BEA587; cursor: pointer; pointer-events: auto;
    width: 40px; height: 40px; display: flex; align-items: center;
}

.user-avatar {
    width: 50px; height: 50px; background-color: #8BC34A; border-radius: 50%;
    overflow: hidden; border: 2px solid #fff; pointer-events: auto;
}
.user-avatar img { width: 100%; height: 100%; object-fit: cover; }

.menu-wrapper { position: absolute; top: 0; left: 0; height: 100%; width: 50px; z-index: 30; }
.menu-wrapper:hover { width: 220px; } /* Hover 時變寬 */

.side-menu {
    position: absolute; top: 0; left: 0; width: 220px; height: 100%;
    background-color: rgba(242, 243, 245, 0.95);
    padding-top: 120px; padding-left: 30px;
    display: flex; flex-direction: column; gap: 30px;
    transform: translateX(-100%);
    transition: transform 0.3s ease-in-out;
    pointer-events: auto;
}
.menu-wrapper:hover .side-menu { transform: translateX(0); }

.menu-item { font-size: 20px; font-weight: bold; color: #8B5E3C; cursor: pointer; }

.info-section { margin-top: 80px; margin-bottom: 20px; text-align: center; }
.info-title { font-size: 20px; color: #F4B04B; font-weight: bold; margin-bottom: 5px; }
.info-time { font-size: 32px; color: #F4B04B; font-weight: bold; }

.map-container { flex: 1; width: 100%; display: flex; justify-content: center; align-items: center; }
.map-image { width: 100%; max-width: 300px; height: auto; object-fit: contain; }

.bottom-area { width: 100%; display: flex; justify-content: center; padding-bottom: 40px; z-index: 5; }

/* =========================================
   7. 地圖頁 (Map)
   ========================================= */
.map-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 0; }
.map-screen .back-btn {
    background: rgba(255,255,255,0.9); border-radius: 50%;
    width: 45px; height: 45px; display: flex; align-items: center; justify-content: center;
    left: 20px; top: 20px;
}
/*使用者頭像*/
.map-avatar-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 10;
    /* 增加陰影讓它在圖片上更明顯 (選填) */
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}

.location-btn {
    position: absolute; width: 110px; height: 110px; border-radius: 50%;
    background-color: rgba(217, 217, 217, 0.9); border: 2px solid rgba(255, 255, 255, 0.5);
    display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 5;
}
.btn-label { font-size: 48px; color: #000; }
.pos-a { top: 32%; left: 8%; } .pos-b { top: 40%; right: 8%; } 
.pos-c { top: 50%; left: 12%; } .pos-d { top: 60%; right: 12%; }

/* Modal 彈窗 */
.modal-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.4); backdrop-filter: blur(2px); z-index: 20;
    display: flex; justify-content: center; align-items: center;
    opacity: 0; pointer-events: none; transition: opacity 0.3s;
}
.modal-overlay.active { opacity: 1; pointer-events: auto; }
.modal-card { width: 340px; background-color: #F2F3F5; border-radius: 30px; padding: 25px 20px; display: flex; flex-direction: column; align-items: center; }
.modal-title { font-size: 24px; color: #F4B04B; font-weight: bold; margin-bottom: 10px; }
.modal-desc { font-size: 12px; color: #999; text-align: center; margin-bottom: 20px; }

/* 環形計時器 */
.timer-wrapper { width: 240px; height: 240px; margin-bottom: 20px; display: flex; justify-content: center; align-items: center; background: #ddd; border-radius: 50%; position: relative; }
.timer-circle { width: 200px; height: 200px; border-radius: 50%; background-color: rgba(255, 239, 213, 0.85); display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; }
.timer-text { color: #C19A6B; font-weight: bold; text-align: center; }
.timer-val { font-size: 48px; line-height: 1; }
.timer-unit { font-size: 24px; }
.knob-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
.knob { position: absolute; bottom: -10px; left: 50%; transform: translateX(-50%); width: 25px; height: 25px; background: #F4B04B; border-radius: 50%; cursor: grab; pointer-events: auto; }

.tea-dots-container { display: flex; gap: 10px; width: 100%; justify-content: center; margin-bottom: 15px; }
.tea-dot { width: 20px; height: 20px; border-radius: 50%; background: #ddd; }
.tea-dot.active { background: #F4B04B; }
.goal-input { width: 100%; height: 45px; border-radius: 15px; border: 1px solid #ddd; margin-bottom: 20px; padding: 0 15px; }
.enter-btn { width: 100%; height: 55px; background: #F4B04B; border-radius: 27.5px; color: #fff; font-size: 22px; font-weight: bold; letter-spacing: 4px; border: none; }

/* =========================================
   8. 茶櫃 (Tea Cabinet)
   ========================================= */
.filter-container { display: flex; justify-content: space-between; width: 100%; padding: 0 20px; margin-top: 20px; }
.filter-btn { width: 80px; height: 45px; border-radius: 10px; background: #F4B04B; color: #000; font-size: 16px; font-weight: bold; border: none; cursor: pointer; }
.filter-btn.active { background: #FFEE58; }
.progress-text { text-align: right; padding-right: 25px; margin: 15px 0 10px 0; font-size: 14px; font-weight: bold; width: 100%; }
.grid-scroll-area { flex: 1; overflow-y: auto; padding: 10px 20px; width: 100%; }
.grid-scroll-area::-webkit-scrollbar { width: 0; }
.tea-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; }
.tea-card { border-radius: 15px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: flex; flex-direction: column; }
.card-top { height: 110px; display: flex; justify-content: center; align-items: center; }
.tea-card.owned .card-top { background: #E0E0E0; } .tea-card.locked .card-top { background: #9E9E9E; }
.card-bottom { height: 60px; background: #F4B04B; display: flex; justify-content: center; align-items: center; padding: 5px; text-align: center; }
.tea-name { font-size: 16px; font-weight: bold; color: #000; }
.locked-text { font-size: 14px; font-weight: bold; color: #000; }

/* =========================================
   9. 專注頁與結果 (Focus)
   ========================================= */
.timer-section { margin-top: 30px; width: 260px; height: 260px; background: rgba(220, 210, 180, 0.4); border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 5; }
.main-visual { flex: 1; width: 100%; display: flex; justify-content: center; align-items: flex-end; position: relative; overflow: hidden; }
.main-visual video, .main-visual img { width: 100%; height: 100%; object-fit: cover; mask-image: linear-gradient(to top, black 80%, transparent 100%); -webkit-mask-image: linear-gradient(to top, black 80%, transparent 100%); }
.checklist-box { position: absolute; top: 20px; right: 20px; width: 140px; background: rgba(220, 215, 182, 0.9); padding: 15px; border-radius: 15px; z-index: 10; }
.checklist-title { font-size: 14px; color: #F4B04B; font-weight: bold; margin-bottom: 8px; text-align: center; }
.checklist-item { font-size: 12px; color: #8a7c68; margin-bottom: 5px; display: list-item; list-style-position: inside; }

.btn-group { display: flex; flex-direction: column; gap: 15px; width: 100%; }
.btn-base { width: 100%; height: 50px; border-radius: 25px; font-size: 18px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }
.btn-abort { background: transparent; border: 2px solid #F4B04B; color: #bea587; }
.btn-return { background: #F4B04B; border: none; color: #fff; }

/* 結果頁 */
.result-message-container { margin-top: 40px; margin-bottom: 30px; text-align: center; }
.result-text { font-size: 22px; font-weight: bold; color: #F4B04B; line-height: 1.5; }
.checklist-card { width: 80%; background: #F5F5F0; border: 2px solid #E0D5B0; border-radius: 15px; padding: 20px; margin-bottom: 20px; z-index: 10; }

/* =========================================
   10. 設定頁與裝扮 (Settings & Costume)
   ========================================= */
.avatar-section { margin-bottom: 60px; display: flex; justify-content: center; }
.avatar-circle { width: 140px; height: 140px; border-radius: 50%; background: #aed581; overflow: hidden; display: flex; justify-content: center; align-items: center; }
.menu-list { width: 100%; display: flex; flex-direction: column; align-items: center; gap: 40px; margin-bottom: auto; }
.logout-section { margin-bottom: 150px; }

/* 裝扮 */
.summary-section { 
    display: flex; 
    gap: 25px; 
    align-items: center; 
    margin-bottom: 40px;
    transform:scale(1.1);
}
.summary-icon { font-size: 64px;color: #000; }
.summary-count {font-size: 32px;    /* 數字變大 */
    font-weight: bold; letter-spacing: 2px;line-height: 1.2;}
.summary-label {font-size: 14px; font-weight: bold; color: #333; letter-spacing: 1px; margin-top: 5px;}
.badge-container { display: flex; justify-content: space-between; width: 100%; margin-bottom: 50px; }
.badge-card { width: 100px; height: 160px; background: #C5A582; border-radius: 20px; display: flex; flex-direction: column; align-items: center; padding-top: 20px; }
.badge-img-circle { width: 70px; height: 70px; background: #fff; border-radius: 50%; margin-bottom: 15px; }
.menu-container {
    width: 100%; 
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin-bottom: 40px;
}
.menu-container .menu-btn {
    width: 320px;       /* 加寬以符合截圖 */
    height: 70px;       /* 加高 */
    padding: 0 30px;    /* 內距 */
    border-radius: 20px;
    
    /* 讓內容 (Icon - Text - Arrow) 平均分佈 */
    display: flex;
    justify-content: space-between; 
    align-items: center;
    
    /* 重置可能導致跑版的設定 */
    text-indent: 0;
    letter-spacing: normal;
}
/* 按鈕內元素微調 */
.menu-container .menu-btn .btn-icon { width: 30px; text-align: center; font-size: 24px; color: #fff;}
.menu-container .menu-btn .btn-text { flex: 1; text-align: center; font-size: 22px; font-weight: bold; letter-spacing: 4px; color: #fff; }
.menu-container .menu-btn .btn-arrow { width: 30px; text-align: right; font-size: 20px; color: #fff; }

/* --- 成就頁面 (Achievements) --- */

/* 1. 大展示區塊 (Orange Box) */
.main-display-card {
    width: 100%;
    height: 300px; /* 配合截圖高度 */
    background-color: #F4B04B;
    border-radius: 30px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
    padding: 20px;
    box-sizing: border-box;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transition: all 0.2s ease; /* 平滑過渡效果 */
}

/* 內容樣式 */
.achieve-avatar-circle {
    width: 100px; height: 100px;
    border-radius: 50%;
    background-color: #fff;
    overflow: hidden;
    margin-bottom: 10px;
    display: flex; justify-content: center; align-items: center;
}
.achieve-avatar-img { width: 100%; height: 100%; object-fit: cover; }
.achieve-title { font-size: 24px; font-weight: bold; letter-spacing: 2px; margin-bottom: 5px; color: #000; }
.achieve-level { font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #000; }
.achieve-desc { font-size: 14px; font-weight: bold; margin-bottom: auto; color: #000; }
.achieve-footer { font-size: 12px; font-weight: bold; color: #fff; opacity: 0.9; margin-top: 10px; line-height: 1.4; }

/* 問號樣式 */
.question-mark {
    font-size: 50px; font-weight: bold; color: #000;
}

/* 2. 網格容器 */
.grid-container {
    width: 100%;
    flex: 1; /* 填滿剩餘高度 */
    overflow-y: auto; /* 允許捲動 */
    padding-bottom: 20px;
}
.grid-container::-webkit-scrollbar { width: 0; } /* 隱藏捲軸 */

.achievements-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3欄 */
    gap: 15px;
}

/* 小卡片樣式 */
.grid-item {
    background-color: #C5A582; /* 米褐色 */
    border-radius: 20px;
    height: 140px;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: transform 0.1s;
}
.grid-item:active { transform: scale(0.95); }

.grid-avatar-circle {
    width: 50px; height: 50px;
    border-radius: 50%; background-color: #fff;
    margin-bottom: 8px;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden;
}
.grid-title { font-size: 14px; font-weight: bold; letter-spacing: 1px; color: #000; margin-bottom: 2px;}
.grid-level { font-size: 12px; font-weight: bold; color: #333; }

/* 3. 灰色 Modal (Popup) */
.achievement-modal-style {
    /* 覆寫通用 modal-card 的背景，改為灰色漸層 */
    background: linear-gradient(180deg, #E0E0E0 0%, #BDBDBD 100%);
    width: 320px;
    min-height: 450px;
    position: relative;
    padding: 40px 20px;
}
.modal-back-btn {
    position: absolute; top: 20px; left: 20px;
    background: none; border: none; font-size: 24px; cursor: pointer; color: #000;
}

/* Modal 內容排版 */
.modal-content-wrapper {
    display: flex; flex-direction: column; align-items: center; text-align: center; height: 100%;
}
.modal-avatar-large {
    width: 130px; height: 130px;
    border-radius: 50%; background-color: #8BC34A; /* 預設底色 */
    border: 4px solid rgba(255,255,255,0.4);
    display: flex; justify-content: center; align-items: center;
    margin-bottom: 20px; overflow: hidden;
}
.modal-title { font-size: 26px; font-weight: bold; letter-spacing: 2px; margin-bottom: 5px; color: #000; }
.modal-level { font-size: 20px; font-weight: bold; margin-bottom: 20px; color: #333; }
.modal-desc { font-size: 16px; font-weight: bold; color: #000; margin-bottom: auto; }
.modal-rate { font-size: 14px; font-weight: bold; color: #fff; margin-top: 30px; }